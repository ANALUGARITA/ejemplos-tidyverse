---
title: "Ejemplos de Tidyverse"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Ejemplos de Tidyverse

## Preparativos carga de paquetes 

```{r carga librerias}
# dplyr
library(dplyr)

#ggplot
library(ggplot2)
```

## Carga de datos

```{r carga-datos}

# Carga de datos desde un archivo CSV
rios <-
  read.csv(file = 'https://raw.githubusercontent.com/tpb728O-programaciongeoespacialr/2021ii/main/datos/hidrologia/fdc/fdc.csv')

# Carga de datos desde un archivo CSV
covid <- 
  read.csv(
    file='https://raw.githubusercontent.com/tpb728O-programaciongeoespacialr/2021ii/main/datos/minsalud/covid/ultimafecha_CSV_GENERAL.csv', 
    sep = ","
  )

```

## dplyr

### mutate()

```{r}
# EStructura del data frame 
str(rios)

```
```{r funciones-enlazadas}
# Despliegue de los primeros registros
 rios %>% slice_head(n = 5) %>%  slice_tail(n = 2)
```
```{r funciones anidadas}
# Funciones anidadas

```

```{r ejemplo mutate}
# Cambio de nombre de las columnas mediante rename()
rios <-
  rios %>%
  rename(fecha = Tiempo,
         pandora = Pandora.mm..637km2.,
         banano = Banano.mm..90km2.)

# Conversión de una columna a tipo Date y creación de una nueva columna
rios <-
  rios %>%
  mutate(fecha = as.Date(fecha, format = "%m/%d/%Y"),
         promedio = (pandora + banano) / 2)

slice_head(rios, n = 10)


```

